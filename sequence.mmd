sequenceDiagram
autonumber
participant U as User
participant FE as Client UI
participant API as API Routes
participant FS as Repo Files
participant GEO as Census Geocoder
Note over FE: Initial load
FE->>API: GET /api/counties
API->>FS: Read Data_PCO JSON
API-->>FE: 200 [{ county, count }]
FE->>API: GET /api/counties/{county}
API->>FS: Filter JSON by county
API-->>FE: 200 [PCO...]
alt Address search
FE->>API: GET /api/geocode?address=...
API->>GEO: Geocode (returntype=geographies)
GEO-->>API: { county }
API-->>FE: 200 { county }
FE->>API: GET /api/counties/{county}
API-->>FE: [PCO...]
end
opt Excel-driven (optional)
FE->>API: GET /api/parse-excel
API->>FS: Read Map/PCO_Contact_Final.xlsx
API-->>FE: 200 [CountyData...] or 404
end
